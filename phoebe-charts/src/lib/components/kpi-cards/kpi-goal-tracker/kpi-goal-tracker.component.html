<div class="goal-tracker" [class.goal-tracker--dark]="theme === 'dark'">
  <div class="goal-tracker__header">
    <h3 class="goal-tracker__title">{{ title }}</h3>
    <span class="goal-tracker__status" [class]="'goal-tracker__status--' + status">
      <i [class]="statusIcon"></i> {{ statusLabel }}
    </span>
  </div>

  <div class="goal-tracker__progress-section">
    <div class="goal-tracker__values">
      <div class="goal-tracker__value-col">
        <span class="goal-tracker__value-label">Current</span>
        <span class="goal-tracker__current">
          {{ formattedCurrent }}<span class="goal-tracker__unit" *ngIf="unit"> {{ unit }}</span>
        </span>
      </div>
      <div class="goal-tracker__value-col goal-tracker__value-col--right">
        <div class="goal-tracker__target-row">
          <span class="goal-tracker__target-label">Goal</span>
          <span class="goal-tracker__target-value">{{ formattedGoal }}</span>
        </div>
        <div class="goal-tracker__target-row goal-tracker__target-row--pace" *ngIf="paceValue != null">
          <span class="goal-tracker__target-label">{{ paceLabel }}</span>
          <span class="goal-tracker__target-value">{{ formattedPace }}</span>
        </div>
        <div class="goal-tracker__target-row goal-tracker__target-row--proj" *ngIf="pacePercentage != null">
          <span class="goal-tracker__target-label">Proj.</span>
          <span class="goal-tracker__projected-pct" [class]="'goal-tracker__projected-pct--' + paceStatus">{{ pacePercentage }}%</span>
        </div>
      </div>
    </div>

    <div class="goal-tracker__chart-container" #progressChart></div>

    <div class="goal-tracker__footer">
      <div class="goal-tracker__remaining">
        <span class="goal-tracker__remaining-value">{{ formattedRemaining }}</span>
        <span class="goal-tracker__remaining-label">Remaining</span>
      </div>
      @if (startDate || endDate) {
      <div class="goal-tracker__dates">
        @if (startDate) {
        <div class="goal-tracker__date-col">
          <span class="goal-tracker__date-value">{{ startDate }}</span>
          <span class="goal-tracker__date-label">Start</span>
        </div>
        }
        @if (endDate) {
        <div class="goal-tracker__date-col">
          <span class="goal-tracker__date-value">{{ endDate }}</span>
          <span class="goal-tracker__date-label">End</span>
        </div>
        }
      </div>
      }
    </div>
  </div>
</div>
