<div class="kpi-comparison" [class.kpi-comparison--dark]="theme === 'dark'">
  <div class="kpi-comparison__accent"
       [style.backgroundColor]="isFavorableChange ? props.colors?.positive : props.colors?.negative"></div>
  <div class="kpi-comparison__content">
    <div class="kpi-comparison__header">
      <div class="kpi-comparison__header-left">
        <span class="kpi-comparison__timeframe">{{ props.timeframe }}</span>
        <span class="kpi-comparison__metric">{{ props.metric }}</span>
      </div>
      <span class="kpi-comparison__period">{{ props.currentPeriodDisplay }}</span>
    </div>

    <div class="kpi-comparison__body">
      <div class="kpi-comparison__value-section">
        <span class="kpi-comparison__value">
          {{ props.currentPeriodValue | KpiBan:props.metricType }}
        </span>
        <span class="kpi-comparison__previous" *ngIf="props.description">
          Prev. {{ props.previousPeriodDisplay }}:
          <strong>{{ props.previousPeriodValue | KpiBan:props.metricType }}</strong>
        </span>
      </div>

      <div class="kpi-comparison__change-section">
        <ng-container *ngIf="hasChange; else noChangeBlock">
          <i class="kpi-comparison__icon fa-sharp-duotone fa-solid fa-2x"
             [ngClass]="iconClass"
             [class.kpi-comparison__icon--favorable]="isFavorableChange"
             [class.kpi-comparison__icon--unfavorable]="!isFavorableChange"
             [style.transform]="useRotation && !isPositiveChange ? 'rotate(90deg)' : ''">
          </i>
          <span class="kpi-comparison__percent"
                [class.kpi-comparison__percent--favorable]="isFavorableChange"
                [class.kpi-comparison__percent--unfavorable]="!isFavorableChange">
            <ng-container *ngIf="percentageChange > 0">+</ng-container>
            {{ percentageChange | number:'1.1-1' }}%
          </span>
        </ng-container>
        <ng-template #noChangeBlock>
          <span class="kpi-comparison__no-change">&mdash;</span>
        </ng-template>
      </div>
    </div>
  </div>
</div>
